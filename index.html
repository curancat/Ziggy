<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Miraculos da Cabra</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Lobster&display=swap');
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:#B1B1B1;font-family:'Lobster',cursive;
      display:flex;align-items:center;justify-content:center;height:100vh;position:relative}
    .phone{width:320px;height:600px;background:#F5F5F5;border-radius:30px;
      box-shadow:0 10px 25px rgba(0,0,0,0.3);padding:20px;
      display:flex;flex-direction:column;justify-content:space-between}
    h3 mark{background:#666;color:#fff;padding:5px 10px;border-radius:8px}
    h3{text-align:center;font-size:24px}
    .buttons{display:flex;flex-direction:column;align-items:center;gap:8px}
    button{width:80%;padding:10px;background:#FFC400;border:none;
      border-radius:20px;font-size:18px;cursor:pointer;transition:.3s;
      font-family:'Lobster',cursive}
    button:hover{background:#ff9800;transform:scale(1.03)}
    .efeito{position:absolute;top:0;left:0;width:100%;height:100%;
      background:rgba(255,196,0,0.4);display:flex;
      align-items:center;justify-content:center;font-size:20px;color:#fff;
      animation:fade 1s forwards}
    @keyframes fade{from{opacity:1}to{opacity:0}}
  </style>
</head>
<body>
  <div class="phone">
    <h3><mark>Litlegot</mark></h3>
    <div class="buttons">
      <button onclick="enviarMensagem()">ðŸ’¬ Enviar mensagem</button>
      <button onclick="lerConversa()">ðŸ“– Ler conversa</button>
      <button onclick="concederPoder()">âœ¨ Criar objeto</button>
      <button onclick="verPoderes()">ðŸ’¼ Meus Poderes</button>
      <button onclick="usarPoder()">ðŸ”§ GÃªnesis</button>
    </div>
  </div>

  <script>
  alert('ZIGGY RECRIAÃ‡ÃƒO');
    const PARTICIPANTES = ['Litlegot','Psique','Abrax','Beast','Hell Cat','Yellowfer'];
    const ME = 'Litlegot';
    const channel = new BroadcastChannel('global_channel');
    const _load = k => JSON.parse(localStorage.getItem(k)||'[]');
    const _save = (k,v) => localStorage.setItem(k, JSON.stringify(v));

    channel.onmessage = ev => {
      const { type, data } = ev.data;
      // Mensagem
      if (type==='msg' && data.to===ME) {
        alert(`ðŸ“¨ De ${data.from}: ${data.text}`);
      }
      // Poder recebido
      if (type==='power' && data.to===ME) {
        savePower(data);
        showEfeito(`ðŸ”® Recebido: ${data.power} de ${data.from}`);
      }
      // Uso de poder em vocÃª
      if (type==='usePower' && data.to===ME) {
        alert(`âœ¨ ${data.from} usou o poder "${data.power}" em vocÃª!`);
      }
    };

    function enviarMensagem() {
      let dest = prompt(`Enviar para quem?\n${PARTICIPANTES.filter(p=>p!==ME).join(', ')}`);
      if (!PARTICIPANTES.includes(dest) || dest===ME) return alert('Destino invÃ¡lido.');
      let txt = prompt(`Mensagem de ${ME} para ${dest}:`);
      if (!txt||!txt.trim()) return;
      const msg = { from: ME, to: dest, text: txt.trim() };
      const msgs = _load('msgs'); msgs.push(msg); _save('msgs', msgs);
      channel.postMessage({ type:'msg', data:msg });
      alert('Mensagem enviada!');
    }

    function lerConversa() {
      let peer = prompt(`Ler conversa com?\n${PARTICIPANTES.filter(p=>p!==ME).join(', ')}`);
      if (!PARTICIPANTES.includes(peer)||peer===ME) return alert('Participante invÃ¡lido.');
      const msgs = _load('msgs').filter(m=>
        (m.from===ME&&m.to===peer)||(m.from===peer&&m.to===ME)
      );
      if (!msgs.length) return alert('Sem mensagens.');
      alert(msgs.map(m=>`${m.from}: ${m.text}`).join('\n'));
    }

    function concederPoder() {
      let dest = prompt(`Conceder item a quem?\n${PARTICIPANTES.filter(p=>p!==ME).join(', ')}`);
      if (!PARTICIPANTES.includes(dest)||dest===ME) return alert('Destino invÃ¡lido.');
      let power = prompt('Qual item?');
      if (!power||!power.trim()) return;
      const p = { from: ME, to: dest, power: power.trim() };
      savePower(p);
      channel.postMessage({ type:'power', data:p });
      showEfeito(`âœ¨ VocÃª concedeu "${power.trim()}" a ${dest}`);
    }

    function savePower(p) {
      const ps = _load('powers'); ps.push(p); _save('powers', ps);
    }

    function verPoderes() {
      const ps = _load('powers').filter(p=>p.to===ME);
      if (!ps.length) return alert('Sem poderes recebidos.');
      alert(ps.map((p,i)=>`${i+1}. ${p.power} (de ${p.from})`).join('\n'));
    }

    function usarPoder() {
      const ps = _load('powers').filter(p=>p.to===ME);
      if (!ps.length) return alert('Sem poderes para usar.');
      let escolha = +prompt(
        ps.map((p,i)=>`${i+1}. ${p.power} (de ${p.from})`).join('\n')
        +'\n\nNÃºmero do poder para usar:'
      ) - 1;
      if (ps[escolha]) {
        const p = ps[escolha];
        channel.postMessage({ type:'usePower', data:{ from:ME, to:p.from, power:p.power } });
        showEfeito(`ðŸ› ï¸ VocÃª usou: ${p.power}`);
      } else alert('Escolha invÃ¡lida.');
    }

    function showEfeito(msg) {
      const e = document.createElement('div');
      e.className = 'efeito'; e.textContent = msg;
      document.body.appendChild(e);
      setTimeout(()=>e.remove(), 1000);
    }
  </script>
</body>
</html>
