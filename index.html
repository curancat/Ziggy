<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Miraculos da Cabra</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Lobster&display=swap');
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:#B1B1B1;font-family:'Lobster',cursive;
      display:flex;align-items:center;justify-content:center;height:100vh;position:relative}
    .phone{width:320px;height:600px;background:#F5F5F5;border-radius:30px;
      box-shadow:0 10px 25px rgba(0,0,0,0.3);padding:20px;
      display:flex;flex-direction:column;justify-content:space-between}
    h3 mark{background:#666;color:#fff;padding:5px 10px;border-radius:8px}
    h3{text-align:center;font-size:24px}
    .buttons{display:flex;flex-direction:column;align-items:center;gap:8px}
    button{width:80%;padding:10px;background:#FFC400;border:none;
      border-radius:20px;font-size:18px;cursor:pointer;transition:.3s;
      font-family:'Lobster',cursive}
    button:hover{background:#ff9800;transform:scale(1.03)}
  </style>
</head>
<body>
  <div class="phone">
    <h3><mark>Litlegot</mark></h3>
    <div class="buttons">
      <button onclick="enviarMensagem()">üí¨ Enviar mensagem</button>
      <button onclick="lerConversa()">üìñ Ler conversa</button>
      <button onclick="concederProtecao()">üõ°Ô∏è G√™nesis</button>
      <button onclick="verItens()">üéí Invent√°rio</button>
      <button onclick="usarItem()">‚ú® Usar item</button>
      <button onclick="usarPoder()">‚ö° Usar poder</button>
    </div>
  </div>

  <script>
    const ME = 'Litlegot';
    const PARTICIPANTES = ['Psique','Abrax','Hell Cat','Beast','Yellowfer','Lindemberg'];

    const channel = new BroadcastChannel('canal_global');

    const _load = k => JSON.parse(localStorage.getItem(ME + '_' + k) || '[]');
    const _save = (k, v) => localStorage.setItem(ME + '_' + k, JSON.stringify(v));

    channel.onmessage = ev => {
      const { type, data } = ev.data;

      if (type === 'msg' && data.to === ME) {
        alert(`üì® De ${data.from}: ${data.text}`);
      }

      if (type === 'usePower' && data.to === ME) {
        const itens = _load('items');
        const prot = itens.find(i => i.target === ME);
        if (prot) {
          alert(`üõ°Ô∏è Seu item "${prot.item}" te protegeu de ${data.power}!`);
        } else {
          alert(`üíî Voc√™ foi atingido por "${data.power}" de ${data.from}.`);
        }
      }
    };

    function enviarMensagem() {
      let dest = prompt(`Enviar para?\n${PARTICIPANTES.join(', ')}`);
      if (!PARTICIPANTES.includes(dest)) return alert('Inv√°lido.');
      let txt = prompt(`Mensagem de ${ME} para ${dest}:`);
      if (!txt) return;
      channel.postMessage({ type: 'msg', data: { from: ME, to: dest, text: txt.trim() } });
      alert('Enviado!');
    }

    function lerConversa() {
      alert('Use o app do destinat√°rio para ver mensagens.');
    }

    function concederProtecao() {
      let dest = prompt(`Dar item de prote√ß√£o a?\n${PARTICIPANTES.join(', ')}`);
      if (!PARTICIPANTES.includes(dest)) return alert('Inv√°lido.');
      let item = prompt('Qual item?');
      if (!item) return;
      const itens = _load('items');
      itens.push({ from: ME, target: dest, item: item.trim() });
      _save('items', itens);
      alert(`üõ°Ô∏è Item "${item.trim()}" concedido a ${dest}`);
    }

    function verItens() {
      const itens = _load('items').filter(i => i.target === ME);
      if (!itens.length) return alert('Sem itens.');
      alert(itens.map((i, n) => `${n + 1}. ${i.item} (de ${i.from})`).join('\n'));
    }

    function usarItem() {
      const itens = _load('items').filter(i => i.target === ME);
      if (!itens.length) return alert('Sem itens.');
      let idx = +prompt(itens.map((i, n) => `${n + 1}. ${i.item}`).join('\n') + '\nEscolha n¬∫:') - 1;
      const sel = itens[idx];
      if (!sel) return alert('Inv√°lido.');
      alert(`‚ú® Voc√™ usou "${sel.item}"!`);
      const all = _load('items');
      const i = all.findIndex(x => x.from === sel.from && x.item === sel.item && x.target === sel.target);
      if (i !== -1) all.splice(i, 1);
      _save('items', all);
    }

    function usarPoder() {
      let dest = prompt(`Usar poder em quem?\n${PARTICIPANTES.join(', ')}`);
      if (!PARTICIPANTES.includes(dest)) return alert('Inv√°lido.');
      let poder = prompt('Nome do poder?');
      if (!poder) return;
      channel.postMessage({ type: 'usePower', data: { from: ME, to: dest, power: poder.trim() } });
      alert(`‚ö° Poder "${poder}" lan√ßado sobre ${dest}`);
    }
  </script>
</body>
</html>
